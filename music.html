<!DOCTYPE html>
<html>
	<head>
		<!--<meta charset="UTF-8">-->
		<title></title>
	</head>
	<body>
		<audio autoplay="autoplay" controls="controls" loop="loop">
	      <source src="css/伊藤サチコ - いつも何度でも.mp3" type="audio/mpeg" id="audio">
	    </audio>		
	    <!--<div class="bgm_btn">
			<span class="bgm_btn_play">播放</span>
			<span class="bgm_btn_stop">暂停</span>
			<span class ="bgm_btn_next">下一首</span> 
			<span class="bgm_btn_rest">重置播放记录</span>
		</div>
		<audio value="1" id="bgm" controls></audio>	-->
	</body>
	<!--<script type="text/javascript">
		  //----------页面初始化------------
        var audio = document.getElementById('audio');
        if(sessionStorage.bgmusic=='pause'){
            playBgMusic(false);
        }else{
            playBgMusic(true);
             //----------处理自动播放------------
            //--创建页面监听，等待微信端页面加载完毕 触发音频播放
            document.addEventListener('DOMContentLoaded', function () {
                function audioAutoPlay() {
                    playBgMusic(true);
                    document.addEventListener("WeixinJSBridgeReady", function () {
                        playBgMusic(true);
                    }, false);
                }
                audioAutoPlay();
            });
            //--创建触摸监听，当浏览器打开页面时，触摸屏幕触发事件，进行音频播放
            function audioAutoPlay() {
                playBgMusic(true);
                document.removeEventListener('touchstart',audioAutoPlay);
            }
            document.addEventListener('touchstart', audioAutoPlay);
        }
        //----------处理页面激活------------
        var hiddenProperty = 'hidden' in document ? 'hidden' :    
        'webkitHidden' in document ? 'webkitHidden' :    
        'mozHidden' in document ? 'mozHidden' :    
        null;
        var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');
        var onVisibilityChange = function(){
            if (!document[hiddenProperty]) {    
                if(!sessionStorage.bgmusic||sessionStorage.bgmusic=='play'){
                    audio.play();
                }
            }else{
                audio.pause();
            }
        }
        document.addEventListener(visibilityChangeEvent, onVisibilityChange);
        //---------背景音乐开关----------
        function triggerBgMusic(){
            if(!sessionStorage.bgmusic||sessionStorage.bgmusic=='play'){
                playBgMusic(false);
            }else{
                playBgMusic(true);
            }
        }
        //---------音乐播放和暂停----------
        function playBgMusic(val){
            if(val){
                audio.play();
                sessionStorage.bgmusic='play';
                document.getElementById('status').innerHTML='正在播放';
            }else{
                audio.pause();
                sessionStorage.bgmusic='pause';
                document.getElementById('status').innerHTML='停止播放了';
            }
        }
	</script>-->
	
	
	<script type="text/javascript">
//		window.onload = function() {
//
//		//多首歌曲播放效果以及基本的按钮定义
//
////		var bgm_echo = document.querySelector('.bgm_echo');
//
//		var bgm_btn_play = document.querySelector('.bgm_btn_play');
//
//		var bgm_btn_stop = document.querySelector('.bgm_btn_stop');
//
//		var bgm_btn_next = document.querySelector('.bgm_btn_next');
//
//		var bgm = document.getElementById('bgm');
//
//		//播放开始
//
//		bgm_btn_play.onclick = function() {
//
//			bgm.play();
//
//		}
//
//		//播放暂停
//
//		bgm_btn_stop.onclick = function() {
//
//			bgm.pause();
//
//		}
//
//		//初始化播放列表【如果有播放记录，则调用】
//
//		if(localStorage.getItem('bgm_gds') != null) {
//
//			bgm.setAttribute('value', localStorage.getItem('bgm_gds'));
//
//			bgm.innerHTML = '<source src="css/' + localStorage.getItem('bgm_gds') + '.mp3" type="audio/mpeg">';
//
////			bgm_echo.innerHTML = '当前播放第' + localStorage.getItem('bgm_gds') + '首歌曲';
//
//		} else {
//
//			bgm.setAttribute('value', 1);
//
//			bgm.innerHTML = '<source src="css/伊藤サチコ - いつも何度でも.mp3" type="audio/mpeg">';
//
////			bgm_echo.innerHTML = '当前播放第1首歌曲';
//
//		}
//
//		//下一首歌曲切换
//
//		bgm_btn_next.onclick = function() {
//
//			var bgm_gds = bgm.getAttribute('value');
//
//			if(bgm_gds < 4) {
//
//				bgm_gds++;
//
//			} else {
//
//				bgm_gds = 1;
//
//			}
//
//			bgm.innerHTML = '<source src="css/' + bgm_gds + '.mp3" type="audio/mpeg">';
//
////			bgm_echo.innerHTML = '当前播放第' + bgm_gds + '首歌曲';
//
//			bgm.load();
//
//			bgm.play();
//
//			//切换歌曲后，写入代码
//
//			bgm.setAttribute('value', bgm_gds);
//
//			localStorage.setItem('bgm_gds', bgm_gds);
//
//		}
//
//		//音乐播放完成操作
//
//		bgm.onended = function() {
//
//			bgm_btn_next.click();
//
//		};
//
//		//重置所有音频记忆
//
//		var bgm_btn_rest = document.querySelector('.bgm_btn_rest');
//
//		bgm_btn_rest.onclick = function() {
//
//			//停止音乐
//
//			bgm.pause();
//
//			setTimeout(function() {
//
//				//删除记录
//
//				localStorage.removeItem('bgm_gds');
//
//				localStorage.removeItem('bgm_time');
//
//				//重新启动
//
//				bgm.setAttribute('value', 1);
//
//				bgm.innerHTML = '<source src="css/伊藤サチコ - いつも何度でも.mp3" type="audio/mpeg">';
//
////				bgm_echo.innerHTML = '当前播放第1首歌曲';
//
//				//重新播放
//
//				bgm.load();
//
//				bgm.play();
//
//			}, 200);
//
//		}
//
//		//音轨补偿代码
//
//		var _hmt = _hmt || [];
//		(function() {
//			var hm = document.createElement("script");
//			hm.src = "https://hm.baidu.com/hm.js?55b841b7fc79462384573c80c4d890b9";
//			var s = document.getElementsByTagName("script")[0];
//			s.parentNode.insertBefore(hm, s)
//		})();
//		setTimeout(function() {
//
//			//获取DOM
//
//			var bgm = document.getElementById('bgm');
//
//			//如果发现有本地存储，则进行音轨补偿
//
//			if(localStorage.getItem('bgm_time') != null) {
//
//				bgm.currentTime = localStorage.getItem('bgm_time');
//
//				//启动播放音乐
//
//				bgm.play();
//
//			}
//
//			//不断循环记录播放进度
//
//			window.setInterval(function() {
//
//				//检测是否支持本地存储
//
//				if(typeof(Storage) !== 'undefined') {
//
//					//写入BGM播放进度
//
//					localStorage.setItem('bgm_time', bgm.currentTime);
//
//				} else {
//
//					//提示浏览器不支持
//
//					var doc_body = document.querySelector('body');
//
//					doc_body.innerHTML = '<h1>抱歉！您的浏览器过旧，请更换新的浏览器再试</h1>';
//
//				}
//
//			}, 100);
//
//			//初始化启动BGM
//
//			bgm.play();
//
//		}, 1000);
//
//	}

	</script>
</html>
